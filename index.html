<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Performance, Attendance & Discipline Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
@page{size:A4;margin:10mm;}

@media print{
  body{zoom:0.82;background:#fff;}
  .search-box,.actions,button{display:none;}
  .no-break{page-break-inside:avoid;}
  .footer-note{display:block;}
}

body{
  font-family:Poppins,Segoe UI,Arial,sans-serif;
  background:#f2f4f8;
}

.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:18px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}

.header{text-align:center;}
.header h1{color:#1b5e20;font-size:28px;margin:0;font-weight:800;}
.header h2{color:#3f51b5;font-size:17px;margin:6px 0;}
.header p{font-size:13px;color:#555;}

.search-box{margin:18px 0;}
input,button{width:100%;padding:12px;font-size:15px;margin-top:8px;}
button{
  background:#1b5e20;color:#fff;border:none;
  border-radius:8px;cursor:pointer;
}
button:hover{background:#145a32;}

.section{
  margin-top:12px;
  border-radius:14px;
  padding:12px;
  display:none;
}

.title{font-weight:700;font-size:15px;margin-bottom:8px;}

.blue{background:#e3f2fd;border-left:6px solid #2196f3;}
.green{background:#e8f5e9;border-left:6px solid #2e7d32;}
.orange{background:#fff3e0;border-left:6px solid #ef6c00;}

pre{
  margin:0;
  font-family:Consolas,monospace;
  font-size:13.5px;
  line-height:1.6;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  margin-top:12px;
}

.sign{
  border:2px dashed #888;
  border-radius:10px;
  padding:10px;
  height:65px;
  font-size:13px;
}

.actions{display:none;margin-top:12px;}
.whatsapp{background:#25D366;margin-top:8px;}

.footer-note{
  display:none;
  margin-top:12px;
  font-size:11.5px;
  text-align:center;
  color:#444;
  border-top:1px dashed #aaa;
  padding-top:6px;
}
</style>
</head>

<body>
<div class="container no-break">

<div class="header">
  <h1>BUKHARIYA EDUCATIONAL CENTRE</h1>
  <h2>Student Performance, Attendance & Discipline Tracker</h2>
  <p id="dt"></p>
</div>

<div class="search-box">
  <input id="reg" placeholder="Enter Registration ID">
  <button onclick="loadReport()">Search</button>
</div>

<div class="section blue">
  <div class="title">üìò STUDENT CONDUCT REPORT</div>
  <pre id="student"></pre>
</div>

<div class="section green">
  <div class="title">üïí DAILY ACTIVITIES</div>
  <pre id="daily"></pre>
</div>

<div class="section orange">
  <div class="title">‚≠ê CONDUCT EVALUATION</div>
  <pre id="conduct"></pre>
</div>

<div class="grid section no-break">
  <div class="sign">Parent Name & Signature</div>
  <div class="sign">Principal Signature & Seal</div>
</div>

.footer-note{This is a computer-generated report. Please verify the details carefully.
Parents are requested to communicate with teachers for the academic and behavioural improvement of the student.
‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥∂‡µç‡¥∞‡¥¶‡µç‡¥ß‡¥æ‡¥™‡µÇ‡µº‡¥µ‡¥Ç ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.
‡¥µ‡¥ø‡¥¶‡µç‡¥Ø‡¥æ‡µº‡¥§‡µç‡¥•‡¥ø‡¥ï‡¥≥‡µÅ‡¥ü‡µÜ ‡¥™‡¥†‡¥®‡¥µ‡µÅ‡¥Ç ‡¥™‡µÜ‡¥∞‡µÅ‡¥Æ‡¥æ‡¥±‡µç‡¥± ‡¥™‡µÅ‡¥∞‡µã‡¥ó‡¥§‡¥ø‡¥Ø‡µÅ‡¥Ç ‡¥â‡¥±‡¥™‡µç‡¥™‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥§‡¥æ‡¥ï‡µç‡¥ï‡µæ ‡¥Ö‡¥ß‡µç‡¥Ø‡¥æ‡¥™‡¥ï‡¥∞‡µÅ‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ü‡¥∂‡¥Ø‡¥µ‡¥ø‡¥®‡¥ø‡¥Æ‡¥Ø‡¥Ç ‡¥®‡¥ü‡¥§‡µç‡¥§‡¥£‡¥Æ‡µÜ‡¥®‡µç‡¥®‡µç ‡¥Ö‡¥≠‡µç‡¥Ø‡µº‡¥§‡µç‡¥•‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.
  display:none;
}

@media print{
    margin-top:12px;
    font-size:11.5px;
    text-align:center;
    color:#444;
    border-top:1px dashed #aaa;
    padding-top:6px;
  }
}


<div class="actions" id="actions">
  <button onclick="window.print()">Download PDF</button>
  <button class="whatsapp" onclick="share()">Send via WhatsApp</button>
</div>

</div>

<script>
const SHEET_ID="1Mr0dZHVjNgueqlnwfwIGtZFQC7NTP7i_SdOGf1_woOI";
const SHEET="Daily_Report";

document.getElementById("dt").innerText=
"Date : "+new Date().toLocaleDateString("en-GB")+
" | Time : "+new Date().toLocaleTimeString();

function hijri(){
 return new Intl.DateTimeFormat('en-TN-u-ca-islamic',
 {day:'numeric',month:'long',year:'numeric'}).format(new Date());
}

async function loadReport(){
 const r=document.getElementById("reg").value.trim();
 if(!r){alert("Registration ID ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï");return;}

 const data=await fetch(`https://opensheet.elk.sh/${SHEET_ID}/${SHEET}`).then(r=>r.json());
 const s=data.find(x=>x["Reg ID"]==r);
 if(!s){alert("ID ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥æ‡¥®‡¥æ‡¥Ø‡¥ø‡¥≤‡µç‡¥≤");return;}

 document.querySelectorAll(".section").forEach(e=>e.style.display="block");
 document.getElementById("actions").style.display="block";

 document.getElementById("student").textContent=
`Reg ID : ${s["Reg ID"]||"-"}
Name : ${s["Student Name (‡¥µ‡¥ø‡¥¶‡µç‡¥Ø‡¥æ‡µº‡¥§‡µç‡¥•‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡µá‡¥∞‡µç)"]||"-"}
Course : ${s["Course"]||"-"}
Class Usthad : ${s["Class Usthad"]||"-"}
Date (Eng) : ${new Date().toLocaleDateString("en-GB")}
Date (Hijri) : ${hijri()}`;

 document.getElementById("daily").textContent=
`Wake Up Early : ${s["Wake Up Early"]||"-"}
Morning Class On Time : ${s["Morning Class On Time"]||"-"}
Breakfast Taken : ${s["Breakfast Taken"]||"-"}
Morning Lesson : ${s["Morning Lesson"]||"-"}
Previous Portion : ${s["Previous Portion"]||"-"}
Dhuhr Prayer : ${s["Dhuhr Prayer"]||"-"}
Afternoon Revision : ${s["Afternoon Revision"]||"-"}
Asr Prayer : ${s["Asr Prayer"]||"-"}
Tasbeeh : ${s["Tasbeeh"]||"-"}
Night Misconduct : ${s["Night Misconduct"]||"-"}
Dinner : ${s["Dinner"]||"-"}
Haddad : ${s["Haddad"]||"-"}
Slept Early : ${s["Slept Early"]||"-"}`;

 document.getElementById("conduct").textContent=
`Conduct : ${s["Conduct"]||"-"}
‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ø : ${s["Conduct (‡¥µ‡µÉ‡¥§‡µç‡¥§‡¥ø)"]||"-"}
Grade : ${s["Grade"]||"-"}
Score : ${s["Score"]||"-"}`;
}

function share(){
 const msg=encodeURIComponent(
 "This is a computer-generated student report. Please verify the details carefully."
 );
 window.open("https://wa.me/?text="+msg);
}
</script>
</body>
</html>
